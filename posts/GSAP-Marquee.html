<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description"/><title>React Marquee</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/e778ee8c522ce554d6e5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e778ee8c522ce554d6e5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/194d69d07dc05d76a8c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/194d69d07dc05d76a8c9.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-3be4d81ceaefee6727a4.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.3a7880dc9545bc486ff4.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.12e7cb6cd6edfa1b71f7.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-b31ca49c38b48dbb1ec1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-6b7b1fccac53976faaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.f049b86706a02f54ba3c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-05aaec818fbb80430976.js" as="script"/></head><body><div id="__next"><div class="Home_container__13EVf"><nav class="Nav_nav__149fn"><figure class="Nav_square__cR07K"><div class="Nav_content__KcKHL"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></div></figure><div class="Nav_marqueeContainer__8MHgj"></div><ul class="Nav_links__3fknx"><li><a href="/">Home</a></li><li><a href="#">Articles</a></li></ul></nav><article class="Post_post__aC3Ls"><h1>React Marquee</h1><p>An infinite carousel built using React and GSAP</p><div></div></article><footer class="Footer_footer__9WsPL">Ermilin @ <!-- -->2021</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"React Marquee","description":"An infinite carousel built using React and GSAP","image":"","content":"\u003ch2 id=\"libraries\"\u003eLibraries\u003c/h2\u003e\n\u003ch3 id=\"react\"\u003eReact\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003euseRef()\u003c/strong\u003e is used to save DOM elements in a variable.\u003cbr\u003e\u003cstrong\u003euseEffect()\u003c/strong\u003e is used to:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003ecreate new elements\u003c/li\u003e\n\u003cli\u003eposition the elements\u003c/li\u003e\n\u003cli\u003eanimate\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003ecreateRef()\u003c/strong\u003e creates references to the newly created elements.\u003cbr\u003e\u003cstrong\u003euseState()\u003c/strong\u003e stores strings and the widest element width.\u003c/p\u003e\n\u003ch3 id=\"gsap\"\u003eGSAP\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eset()\u003c/strong\u003e sets the position of the elements.\u003cbr\u003e\u003cstrong\u003eto()\u003c/strong\u003e animates the elements.\u003c/p\u003e\n\u003ch2 id=\"code-structure\"\u003eCode Structure\u003c/h2\u003e\n\u003ch3 id=\"cloning\"\u003eCloning\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e Array of strings coming in as props to the marquee component\u003c/li\u003e\n\u003cli\u003e Store each element as a ref\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003elet els = useRef(items.map(() =\u0026gt; createRef()));\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e Measure the width of the caontainer and the props\u003c/li\u003e\n\u003cli\u003e Keep cloning elements if the container width is greater than the total width of the elements\u003c/li\u003e\n\u003cli\u003eFind the widest element to offset the container with \u003c!-- // if (maxWidth \u003c width) {\n // maxWidth = width;\n // } --\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst [items, setItems] = useState(props.data);\n\nuseEffect(() =\u0026gt; {\n  let totalWidth = 0;\n  let arr = items;\n  while (totalWidth \u0026lt; containerWidth) {\n    els.forEach((item, i) =\u0026gt; {\n      let width = item.getBoundingClientRect().width;\n\n      if (totalWidth \u0026lt; containerWidth) {\n        arr.push(item.textContent);\n      }\n      totalWidth = totalWidth + width;\n    });\n  }\n  setItems(arr);\n}, []);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"steps\"\u003eSteps\u003c/h3\u003e\n\u003cp\u003eThe elements are placed on the X-axis using gsap.set and the total width of the placed elements which accumulates throughout the iteration.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003elet accWidth = 0;\nels.forEach((item) =\u0026gt; {\n  let width = item.getBoundingClientRect().width;\n  gsap.set(item, {\n    x: accWidth,\n  });\n  accWidth = accWidth + width;\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"animation\"\u003eAnimation\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eEach item animates from its initial position to the total width of every element combined\u003c/li\u003e\n\u003cli\u003eWhen the element has reached the end, it has to place itself at the end of the row, this is done with a modulus of the total width using gsap.utils.wrap()\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003edelta\u003c/strong\u003e is either \u003cstrong\u003e1\u003c/strong\u003e or \u003cstrong\u003e-1\u003c/strong\u003e depending on the direction of the animation\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst wrap = gsap.utils.wrap(0, accWidth);\nconst animation = gsap.to(els, {\n  x: `+=${accWidth * delta}`,\n  modifiers: {\n    x: gsap.utils.unitize(wrap),\n  },\n  duration: accWidth / 50,\n  ease: \u0026#39;none\u0026#39;,\n  repeat: -1,\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"render\"\u003eRender\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u0026lt;div ref={container}\u0026gt;\n  \u0026lt;ul style={{ left: -maxElWidth }}\u0026gt;\n    {items.map((e, i) =\u0026gt; (\n      \u0026lt;li key={i} ref={(e) =\u0026gt; (els[i] = e)}\u0026gt;\n        {e}\n      \u0026lt;/li\u0026gt;\n    ))}\n  \u0026lt;/ul\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is how I built my React marquee component using GSAP.\u003c/p\u003e\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"GSAP-Marquee"},"buildId":"Z8ekOvVmKvF_3w7TBHxZU","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8f31809deb7932dd0187.js"></script><script src="/_next/static/chunks/webpack-3be4d81ceaefee6727a4.js" async=""></script><script src="/_next/static/chunks/framework.3a7880dc9545bc486ff4.js" async=""></script><script src="/_next/static/chunks/commons.12e7cb6cd6edfa1b71f7.js" async=""></script><script src="/_next/static/chunks/main-b31ca49c38b48dbb1ec1.js" async=""></script><script src="/_next/static/chunks/pages/_app-6b7b1fccac53976faaa5.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.f049b86706a02f54ba3c.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-05aaec818fbb80430976.js" async=""></script><script src="/_next/static/Z8ekOvVmKvF_3w7TBHxZU/_buildManifest.js" async=""></script><script src="/_next/static/Z8ekOvVmKvF_3w7TBHxZU/_ssgManifest.js" async=""></script></body></html>