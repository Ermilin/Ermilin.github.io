<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description"/><title>React-Marquee</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/0fcb8f87c12b9be47189.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0fcb8f87c12b9be47189.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b15c804f014512248790.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b15c804f014512248790.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-6c6960ac9b3c2d31b811.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.3a7880dc9545bc486ff4.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.12e7cb6cd6edfa1b71f7.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-b31ca49c38b48dbb1ec1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-0dfdaa203074ecf3f178.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.ad9fa8f2d3f49ba3d74c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-2a6e04fc557868160716.js" as="script"/></head><body><div id="__next"><div class="Home_container__13EVf"><a href="/">Back</a><article><h1>React-Marquee</h1><p>An infinite carousel built with React and GSAP</p><div></div></article><footer class="Footer_footer__9WsPL">Ermilin @ <!-- -->2021</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"React-Marquee","description":"An infinite carousel built with React and GSAP","image":"","content":"\u003ch2 id=\"libraries\"\u003eLibraries\u003c/h2\u003e\n\u003ch3 id=\"react\"\u003eReact\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003euseRef()\u003c/strong\u003e lets us access our elements as a variable\n\u003cstrong\u003euseEffect()\u003c/strong\u003e is used to:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003ecreate new elements\u003c/li\u003e\n\u003cli\u003eposition the elements\u003c/li\u003e\n\u003cli\u003eanimate\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003ecreateRef()\u003c/strong\u003e creates references to our newly created elements.\u003cbr\u003e\u003cstrong\u003euseState()\u003c/strong\u003e stores our strings and our widest element width.\u003c/p\u003e\n\u003ch3 id=\"gsap\"\u003eGSAP\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eset()\u003c/strong\u003e is how we set the position of our elements.\u003cbr\u003e\u003cstrong\u003eto()\u003c/strong\u003e animates the elements.\u003c/p\u003e\n\u003ch2 id=\"code-structure\"\u003eCode Structure\u003c/h2\u003e\n\u003ch3 id=\"cloning\"\u003eCloning\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e Array of strings coming in as props to our component\u003c/li\u003e\n\u003cli\u003e Store each element as a ref\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003elet els = useRef(items.map(() =\u0026gt; createRef()));\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e Measure container and props width\u003c/li\u003e\n\u003cli\u003e Keep cloning elements if the container width is greater than the total width of our elements\u003c/li\u003e\n\u003cli\u003eFind the widest element so we can offset the container with its width \u003c!-- // if (maxWidth \u003c width) {\n // maxWidth = width;\n // } --\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst [items, setItems] = useState(props.data);\n\nuseEffect(() =\u0026gt; {\n  let totalWidth = 0;\n  let arr = items;\n  while (totalWidth \u0026lt; containerWidth) {\n    els.forEach((item, i) =\u0026gt; {\n      let width = item.getBoundingClientRect().width;\n\n      if (totalWidth \u0026lt; containerWidth) {\n        arr.push(item.textContent);\n      }\n      totalWidth = totalWidth + width;\n    });\n  }\n  setItems(arr);\n}, []);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"steps\"\u003eSteps\u003c/h3\u003e\n\u003cp\u003eThe elements are placed on the X axis using gsap.set and the total width of our placed elements which accumulates throughout our iteration.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003elet accWidth = 0;\nels.forEach((item) =\u0026gt; {\n  let width = item.getBoundingClientRect().width;\n  gsap.set(item, {\n    x: accWidth,\n  });\n  accWidth = accWidth + width;\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"animation\"\u003eAnimation\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eEach item animates from its initial position to the total width of every element combined\u003c/li\u003e\n\u003cli\u003eWhen the element has reached the end, it has to place itself at the end of the row, we do this with a modulus of the total width using gsap.utils.wrap()\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003edelta\u003c/strong\u003e is either \u003cstrong\u003e1\u003c/strong\u003e or \u003cstrong\u003e-1\u003c/strong\u003e depending on the direction of the animation\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst wrap = gsap.utils.wrap(0, accWidth);\nconst animation = gsap.to(els, {\n  x: `+=${accWidth * delta}`,\n  modifiers: {\n    x: gsap.utils.unitize(wrap),\n  },\n  duration: accWidth / 50,\n  ease: \u0026#39;none\u0026#39;,\n  repeat: -1,\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"render\"\u003eRender\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e\u0026lt;div ref={container}\u0026gt;\n  \u0026lt;ul style={{ left: -maxElWidth }}\u0026gt;\n    {items.map((e, i) =\u0026gt; (\n      \u0026lt;li key={i} ref={(e) =\u0026gt; (els[i] = e)}\u0026gt;\n        {e}\n      \u0026lt;/li\u0026gt;\n    ))}\n  \u0026lt;/ul\u0026gt;\n\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is how I built my React marquee component using GSAP.\u003c/p\u003e\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"GSAP-Marquee"},"buildId":"m5Uip4xniKNXu9yYVGg_3","runtimeConfig":{},"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8f31809deb7932dd0187.js"></script><script src="/_next/static/chunks/webpack-6c6960ac9b3c2d31b811.js" async=""></script><script src="/_next/static/chunks/framework.3a7880dc9545bc486ff4.js" async=""></script><script src="/_next/static/chunks/commons.12e7cb6cd6edfa1b71f7.js" async=""></script><script src="/_next/static/chunks/main-b31ca49c38b48dbb1ec1.js" async=""></script><script src="/_next/static/chunks/pages/_app-0dfdaa203074ecf3f178.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.ad9fa8f2d3f49ba3d74c.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-2a6e04fc557868160716.js" async=""></script><script src="/_next/static/m5Uip4xniKNXu9yYVGg_3/_buildManifest.js" async=""></script><script src="/_next/static/m5Uip4xniKNXu9yYVGg_3/_ssgManifest.js" async=""></script></body></html>